function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e,n;var r,s,a,i,o,c,l,h,u=t(function(){if(n)return e;n=1;var t=Array.prototype.slice;return e=function(e,n){"length"in e||(e=[e]);e=t.call(e);for(;e.length;){var r=e.shift(),s=n(r);if(s)return s;r.childNodes&&r.childNodes.length&&(e=t.call(r.childNodes).concat(e))}}}());function g(){if(i)return a;i=1;const t=s?r:(s=1,r={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),e={};for(const n of Object.keys(t))e[t[n]]=n;const n={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};a=n;for(const t of Object.keys(n)){if(!("channels"in n[t]))throw new Error("missing channels property: "+t);if(!("labels"in n[t]))throw new Error("missing channel labels property: "+t);if(n[t].labels.length!==n[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:r}=n[t];delete n[t].channels,delete n[t].labels,Object.defineProperty(n[t],"channels",{value:e}),Object.defineProperty(n[t],"labels",{value:r})}return n.rgb.hsl=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,s=Math.min(e,n,r),a=Math.max(e,n,r),i=a-s;let o,c;a===s?o=0:e===a?o=(n-r)/i:n===a?o=2+(r-e)/i:r===a&&(o=4+(e-n)/i),o=Math.min(60*o,360),o<0&&(o+=360);const l=(s+a)/2;return c=a===s?0:l<=.5?i/(a+s):i/(2-a-s),[o,100*c,100*l]},n.rgb.hsv=function(t){let e,n,r,s,a;const i=t[0]/255,o=t[1]/255,c=t[2]/255,l=Math.max(i,o,c),h=l-Math.min(i,o,c),u=function(t){return(l-t)/6/h+.5};return 0===h?(s=0,a=0):(a=h/l,e=u(i),n=u(o),r=u(c),i===l?s=r-n:o===l?s=1/3+e-r:c===l&&(s=2/3+n-e),s<0?s+=1:s>1&&(s-=1)),[360*s,100*a,100*l]},n.rgb.hwb=function(t){const e=t[0],r=t[1];let s=t[2];const a=n.rgb.hsl(t)[0],i=1/255*Math.min(e,Math.min(r,s));return s=1-1/255*Math.max(e,Math.max(r,s)),[a,100*i,100*s]},n.rgb.cmyk=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,s=Math.min(1-e,1-n,1-r);return[100*((1-e-s)/(1-s)||0),100*((1-n-s)/(1-s)||0),100*((1-r-s)/(1-s)||0),100*s]},n.rgb.keyword=function(n){const r=e[n];if(r)return r;let s,a=1/0;for(const e of Object.keys(t)){const r=t[e],c=(o=r,((i=n)[0]-o[0])**2+(i[1]-o[1])**2+(i[2]-o[2])**2);c<a&&(a=c,s=e)}var i,o;return s},n.keyword.rgb=function(e){return t[e]},n.rgb.xyz=function(t){let e=t[0]/255,n=t[1]/255,r=t[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;return[100*(.4124*e+.3576*n+.1805*r),100*(.2126*e+.7152*n+.0722*r),100*(.0193*e+.1192*n+.9505*r)]},n.rgb.lab=function(t){const e=n.rgb.xyz(t);let r=e[0],s=e[1],a=e[2];r/=95.047,s/=100,a/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,s=s>.008856?s**(1/3):7.787*s+16/116,a=a>.008856?a**(1/3):7.787*a+16/116;return[116*s-16,500*(r-s),200*(s-a)]},n.hsl.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;let s,a,i;if(0===n)return i=255*r,[i,i,i];s=r<.5?r*(1+n):r+n-r*n;const o=2*r-s,c=[0,0,0];for(let t=0;t<3;t++)a=e+1/3*-(t-1),a<0&&a++,a>1&&a--,i=6*a<1?o+6*(s-o)*a:2*a<1?s:3*a<2?o+(s-o)*(2/3-a)*6:o,c[t]=255*i;return c},n.hsl.hsv=function(t){const e=t[0];let n=t[1]/100,r=t[2]/100,s=n;const a=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,s*=a<=1?a:2-a;return[e,100*(0===r?2*s/(a+s):2*n/(r+n)),100*((r+n)/2)]},n.hsv.rgb=function(t){const e=t[0]/60,n=t[1]/100;let r=t[2]/100;const s=Math.floor(e)%6,a=e-Math.floor(e),i=255*r*(1-n),o=255*r*(1-n*a),c=255*r*(1-n*(1-a));switch(r*=255,s){case 0:return[r,c,i];case 1:return[o,r,i];case 2:return[i,r,c];case 3:return[i,o,r];case 4:return[c,i,r];case 5:return[r,i,o]}},n.hsv.hsl=function(t){const e=t[0],n=t[1]/100,r=t[2]/100,s=Math.max(r,.01);let a,i;i=(2-n)*r;const o=(2-n)*s;return a=n*s,a/=o<=1?o:2-o,a=a||0,i/=2,[e,100*a,100*i]},n.hwb.rgb=function(t){const e=t[0]/360;let n=t[1]/100,r=t[2]/100;const s=n+r;let a;s>1&&(n/=s,r/=s);const i=Math.floor(6*e),o=1-r;a=6*e-i,1&i&&(a=1-a);const c=n+a*(o-n);let l,h,u;switch(i){default:case 6:case 0:l=o,h=c,u=n;break;case 1:l=c,h=o,u=n;break;case 2:l=n,h=o,u=c;break;case 3:l=n,h=c,u=o;break;case 4:l=c,h=n,u=o;break;case 5:l=o,h=n,u=c}return[255*l,255*h,255*u]},n.cmyk.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,s=t[3]/100;return[255*(1-Math.min(1,e*(1-s)+s)),255*(1-Math.min(1,n*(1-s)+s)),255*(1-Math.min(1,r*(1-s)+s))]},n.xyz.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100;let s,a,i;return s=3.2406*e+-1.5372*n+-.4986*r,a=-.9689*e+1.8758*n+.0415*r,i=.0557*e+-.204*n+1.057*r,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,a=a>.0031308?1.055*a**(1/2.4)-.055:12.92*a,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,s=Math.min(Math.max(0,s),1),a=Math.min(Math.max(0,a),1),i=Math.min(Math.max(0,i),1),[255*s,255*a,255*i]},n.xyz.lab=function(t){let e=t[0],n=t[1],r=t[2];e/=95.047,n/=100,r/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;return[116*n-16,500*(e-n),200*(n-r)]},n.lab.xyz=function(t){let e,n,r;n=(t[0]+16)/116,e=t[1]/500+n,r=n-t[2]/200;const s=n**3,a=e**3,i=r**3;return n=s>.008856?s:(n-16/116)/7.787,e=a>.008856?a:(e-16/116)/7.787,r=i>.008856?i:(r-16/116)/7.787,e*=95.047,n*=100,r*=108.883,[e,n,r]},n.lab.lch=function(t){const e=t[0],n=t[1],r=t[2];let s;s=360*Math.atan2(r,n)/2/Math.PI,s<0&&(s+=360);return[e,Math.sqrt(n*n+r*r),s]},n.lch.lab=function(t){const e=t[0],n=t[1],r=t[2]/360*2*Math.PI;return[e,n*Math.cos(r),n*Math.sin(r)]},n.rgb.ansi16=function(t,e=null){const[r,s,a]=t;let i=null===e?n.rgb.hsv(t)[2]:e;if(i=Math.round(i/50),0===i)return 30;let o=30+(Math.round(a/255)<<2|Math.round(s/255)<<1|Math.round(r/255));return 2===i&&(o+=60),o},n.hsv.ansi16=function(t){return n.rgb.ansi16(n.hsv.rgb(t),t[2])},n.rgb.ansi256=function(t){const e=t[0],n=t[1],r=t[2];if(e===n&&n===r)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;return 16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},n.ansi16.rgb=function(t){let e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const n=.5*(1+~~(t>50));return[(1&e)*n*255,(e>>1&1)*n*255,(e>>2&1)*n*255]},n.ansi256.rgb=function(t){if(t>=232){const e=10*(t-232)+8;return[e,e,e]}let e;t-=16;return[Math.floor(t/36)/5*255,Math.floor((e=t%36)/6)/5*255,e%6/5*255]},n.rgb.hex=function(t){const e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},n.hex.rgb=function(t){const e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let n=e[0];3===e[0].length&&(n=n.split("").map((t=>t+t)).join(""));const r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},n.rgb.hcg=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,s=Math.max(Math.max(e,n),r),a=Math.min(Math.min(e,n),r),i=s-a;let o,c;return o=i<1?a/(1-i):0,c=i<=0?0:s===e?(n-r)/i%6:s===n?2+(r-e)/i:4+(e-n)/i,c/=6,c%=1,[360*c,100*i,100*o]},n.hsl.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=n<.5?2*e*n:2*e*(1-n);let s=0;return r<1&&(s=(n-.5*r)/(1-r)),[t[0],100*r,100*s]},n.hsv.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=e*n;let s=0;return r<1&&(s=(n-r)/(1-r)),[t[0],100*r,100*s]},n.hcg.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;if(0===n)return[255*r,255*r,255*r];const s=[0,0,0],a=e%1*6,i=a%1,o=1-i;let c=0;switch(Math.floor(a)){case 0:s[0]=1,s[1]=i,s[2]=0;break;case 1:s[0]=o,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=i;break;case 3:s[0]=0,s[1]=o,s[2]=1;break;case 4:s[0]=i,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=o}return c=(1-n)*r,[255*(n*s[0]+c),255*(n*s[1]+c),255*(n*s[2]+c)]},n.hcg.hsv=function(t){const e=t[1]/100,n=e+t[2]/100*(1-e);let r=0;return n>0&&(r=e/n),[t[0],100*r,100*n]},n.hcg.hsl=function(t){const e=t[1]/100,n=t[2]/100*(1-e)+.5*e;let r=0;return n>0&&n<.5?r=e/(2*n):n>=.5&&n<1&&(r=e/(2*(1-n))),[t[0],100*r,100*n]},n.hcg.hwb=function(t){const e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},n.hwb.hcg=function(t){const e=t[1]/100,n=1-t[2]/100,r=n-e;let s=0;return r<1&&(s=(n-r)/(1-r)),[t[0],100*r,100*s]},n.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},n.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},n.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},n.gray.hsl=function(t){return[0,0,t[0]]},n.gray.hsv=n.gray.hsl,n.gray.hwb=function(t){return[0,100,t[0]]},n.gray.cmyk=function(t){return[0,0,0,t[0]]},n.gray.lab=function(t){return[t[0],0,0]},n.gray.hex=function(t){const e=255&Math.round(t[0]/100*255),n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n},n.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]},a}function d(){if(c)return o;c=1;const t=g();function e(e){const n=function(){const e={},n=Object.keys(t);for(let t=n.length,r=0;r<t;r++)e[n[r]]={distance:-1,parent:null};return e}(),r=[e];for(n[e].distance=0;r.length;){const e=r.pop(),s=Object.keys(t[e]);for(let t=s.length,a=0;a<t;a++){const t=s[a],i=n[t];-1===i.distance&&(i.distance=n[e].distance+1,i.parent=e,r.unshift(t))}}return n}function n(t,e){return function(n){return e(t(n))}}function r(e,r){const s=[r[e].parent,e];let a=t[r[e].parent][e],i=r[e].parent;for(;r[i].parent;)s.unshift(r[i].parent),a=n(t[r[i].parent][i],a),i=r[i].parent;return a.conversion=s,a}return o=function(t){const n=e(t),s={},a=Object.keys(n);for(let t=a.length,e=0;e<t;e++){const t=a[e];null!==n[t].parent&&(s[t]=r(t,n))}return s}}var f=function(){if(h)return l;h=1;const t=g(),e=d(),n={};return Object.keys(t).forEach((r=>{n[r]={},Object.defineProperty(n[r],"channels",{value:t[r].channels}),Object.defineProperty(n[r],"labels",{value:t[r].labels});const s=e(r);Object.keys(s).forEach((t=>{const e=s[t];n[r][t]=function(t){const e=function(...e){const n=e[0];if(null==n)return n;n.length>1&&(e=n);const r=t(e);if("object"==typeof r)for(let t=r.length,e=0;e<t;e++)r[e]=Math.round(r[e]);return r};return"conversion"in t&&(e.conversion=t.conversion),e}(e),n[r][t].raw=function(t){const e=function(...e){const n=e[0];return null==n?n:(n.length>1&&(e=n),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(e)}))})),l=n}(),b=t(f);const m=(t,e)=>{let n;for(let r=0,s=t.length;r<s;r++){const s=t[r];if(s.id===e){n=s;break}}if(n)return n;throw new Error(`Cannot find ${e} id in ${JSON.stringify(t)}`)},p=(t,e)=>{for(let n=0,r=e.length;n<r;n++){const r=e[n]||{};for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)){const n=r[e];void 0!==n&&(t[e]=n)}}return t},v={stageSwitchTransition:800,stageSwitchDelay:0,stageSwitchEasing:"cubic-bezier(.86, 0, .07, 1)",disableAfterSwitching:500,stages:[]},y={scrollNumber:1,transition:200,easing:"ease",items:[]},w=new RegExp(/-?\d+(?:\.\d+)?/,"g"),S=["webkit","ms","moz",""];class k{constructor(t,e){if("string"==typeof t&&(t=document.querySelector(t)),!t||1!==t.nodeType)throw new Error("Cannot find target dom to apply scroll effects");e=p({},[v,e]),t.style.overflow="hidden",this.target=t,this.config=e,this.animating=!1,this.switching=!1,this.stages=[],this.activeStageIndex=0,this.initStages(),this.processStages(),this.defineActiveStage(),this.addEventListeners()}defineActiveStage(){let t=this.stages[this.activeStageIndex];const e=this;Object.defineProperty(this,"activeStage",{get:function(){return t},set:function(n){if(n===t)return;const r=JSON.parse(JSON.stringify(t));t=n,e.activeStageIndex=e.stages.findIndex((t=>t===n)),e.handleActiveStageChange(),e.target.dispatchEvent(new CustomEvent("stage-change",{detail:{previous:{id:r.id,node:r.node,config:r.stageConfig,step:r.step},current:{id:n.id,node:n.node,config:n.stageConfig}}}))}})}addEventListeners(){this.boundHandleScroll=this.handleScroll.bind(this),this.throttledHandleStepChange=function(t,e){var n,r={},s=r.noTrailing,a=void 0!==s&&s,i=r.noLeading,o=void 0!==i&&i,c=r.debounceMode,l=void 0===c?void 0:c,h=!1,u=0;function g(){n&&clearTimeout(n)}function d(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];var c=this,d=Date.now()-u;function f(){u=Date.now(),e.apply(c,s)}function b(){n=void 0}h||(o||!l||n||f(),g(),void 0===l&&d>t?o?(u=Date.now(),a||(n=setTimeout(l?b:f,t))):f():!0!==a&&(n=setTimeout(l?b:f,void 0===l?t-d:t)))}return d.cancel=function(t){var e=(t||{}).upcomingOnly,n=void 0!==e&&e;g(),h=!n},d}(50,this.handleStepChange),document.addEventListener("wheel",this.boundHandleScroll,{passive:!1})}removeEventListeners(){document.removeEventListener("wheel",this.boundHandleScroll)}initStages(){u(this.target,(t=>{if(1!==t.nodeType)return;const e=t.getAttribute("data-scroll-stage-id");if(e){const n=m(this.config.stages,e);if(!n)throw new Error(`\n            Missing scrolling config for stage id: ${e}\n          `);t.style.transition=`\n          ${this.config.stageSwitchTransition}ms ${this.config.stageSwitchEasing} ${this.config.stageSwitchDelay}ms\n        `,this.stages.push({node:t,stageConfig:p({},[y,n]),id:e,step:0})}}))}processStages(){this.stages.forEach((t=>{this.constructor.attachNodeToItems(t),this.processItemEffects(t)}))}static attachNodeToItems(t){u(t.node,(e=>{if(1!==e.nodeType)return;const n=e.getAttribute("data-scroll-item-id");if(n){const r=m(t.stageConfig.items,n);if(!r)throw new Error(`Missing scrolling config for item id: ${n}`);r.node=e}}))}processItemEffects(t){t.stageConfig.items.forEach((e=>{e.effects.forEach((e=>{void 0===e.startAt&&(e.startAt=0),void 0===e.endAt&&(e.endAt=Number(t.stageConfig.scrollNumber)),this.constructor.processColorValues(e),e.startNumbers=(e.start.match(w)||[]).map((t=>Number(t))),e.endNumbers=(e.end.match(w)||[]).map((t=>Number(t))),e.strings=e.start.split(w)}))}))}static getCurrentStyleValue(t,e){const{startAt:n,endAt:r,startNumbers:s,endNumbers:a,strings:i,isColor:o}=t;e=Math.min(r,Math.max(n,e));let c=i[0],l=-1;return s&&s.length>0&&s.forEach(((t,s)=>{/rgba/.test(i[s])&&(l=s+3);let h=t+(e-n)*(a[s]-t)/(r-n);o&&s!==l&&(h=Math.round(h)),c+=`${h}${i[s+1]}`})),c}static processColorValues(t){["start","end"].forEach((e=>{let n=t[e];const r=(t=>{const e={hsl:new RegExp(/^hsla?\(\s*\d{1,3}\s*,\s*\d{1,3}%\s*,\s*\d{1,3}%\s*(,\s*[\d.]+)?\s*\)$/),hex:new RegExp(/^#[a-f0-9]{3}([a-f0-9]{3})?$/,"i")};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&e[n].test(t))return n})(n);if(r){if(t.isColor=!0,"hex"===r)n=`\n          rgb(${b.hex.rgb(n).join(",")})\n        `;else if("hsl"===r){const[t,e,r,s]=n.match(/hsla?\((.*)\)/)[1].split(/\s*,\s*/).map((t=>parseFloat(t)));n=`\n          rgba(${b.hsl.rgb([t,e,r]).join(",")}, ${void 0===s?1:s})\n        `}t[e]=n}}))}setActiveStage(t,e=!1){if(this.activeStage.id===t)return;const n=this.activeStageIndex;this.activeStage.step=0;const r=m(this.stages,t)||this.stages[0],s=this.stages.findIndex((t=>t===r));e?(r.step=n<s?0:Number(r.stageConfig.scrollNumber),this.activeStage=r,this.handleStepChange(!1,!1)):(this.activeStage=r,this.handleStepChange(!1,!1))}handleActiveStageChange(){clearTimeout(this.switchingTimeout),this.switching=!0,this.stages.forEach((t=>{S.forEach((e=>{const n=e.length?`${e}Transform`:"transform";t.node.style[n]=`translateY(${100*-this.activeStageIndex}%)`}))})),this.switchingTimeout=setTimeout((()=>{this.switching=!1}),Number(this.config.stageSwitchTransition)+Number(this.config.disableAfterSwitching))}setStep(t){const e=typeof t;if("number"!==e)throw new Error(`step should be a number, got ${e}`);if(t<0||t>Number(this.activeStage.stageConfig.scrollNumber))throw new Error(`\n        step should be within [0, ${this.activeStage.stageConfig.scrollNumber}], got ${t}\n      `);this.activeStage.step!==t&&(this.activeStage.step=t,this.handleStepChange())}getActiveStage(){return this.activeStage}getStep(){return this.activeStage.step}handleStepChange(t=!0,e=!0){const n=this.activeStage.step,r=this.activeStage.stageConfig,s=this.activeStageIndex;if(n>Number(r.scrollNumber)){if(s===this.stages.length-1)return this.target.dispatchEvent(new CustomEvent("scroll-out",{detail:{direction:"bottom"}})),void(this.activeStage.step=Number(r.scrollNumber));this.setActiveStage(this.stages[s+1].id,!0)}else if(n<0){if(0===s)return this.target.dispatchEvent(new CustomEvent("scroll-out",{detail:{direction:"top"}})),void(this.activeStage.step=0);this.setActiveStage(this.stages[s-1].id,!0)}else clearTimeout(this.animatingTimeout),this.animating=!0,r.items.forEach((e=>{e.node.style.transition=t?`${r.transition}ms ${r.easing}`:"none",e.effects.forEach((t=>{e.node.style[t.property]=this.constructor.getCurrentStyleValue(t,n)}))})),e&&this.target.dispatchEvent(new CustomEvent("step-change",{detail:{activeStage:{id:this.activeStage.id,node:this.activeStage.node,config:r},current:n}})),this.animatingTimeout=setTimeout((()=>{this.animating=!1}),t?Number(r.transition):0)}handleScroll(t){t.preventDefault(),this.animating||this.switching||(this.activeStage.step+=t.deltaY>0?1:-1,this.throttledHandleStepChange())}destroy(){this.removeEventListeners()}restore(){this.addEventListeners()}}window.onload=function(){new k("#wrap",{stages:[{id:"color",scrollNumber:7,transition:200,items:[{id:"battery",effects:[{property:"width",start:"125px",end:"250px"},{property:"backgroundColor",start:"#fd0",end:"#209b35"}]},{id:"text",effects:[{property:"color",start:"#fd0",end:"#209b35"}]}]}]})};
